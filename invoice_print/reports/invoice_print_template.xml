<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="invoice_template_print">
        <t t-call="web.basic_layout">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <div width="100%" style="text-align: center;">
                        <img src='/web/binary/company_logo'
                             style="max-height: 25px;"
                             alt="Logo"/>
                    </div>
                    <div width="100%">
                        <table width="100%" style="font-weight: bold; border-color:white ;">
                            <tr>
                                <td align="center"
                                    style="vertical-align: middle; font-size: 9px;">
                                    <span t-field="doc.company_id.partner_id"
                                          t-options='{"widget": "contact", "fields": ["address", "phone", "email"], "no_marker": True}'/>
                                    <br/>
                                </td>
                            </tr>
                            <tr>
                                <td align="center"
                                    style="padding-top: 8px; vertical-align: middle; font-size: 10px;">
                                    CUSTOMER ORDER
                                </td>
                                <br></br>
                                <br></br>
                            </tr>
                        </table>
                        <br></br>
                    </div>
                    <div width="100%">
                        <table width="100%" style="font-weight: bold; border-color:white ; font-size:9px;">
                            <tr>
                                <td style="font-size:10px">
                                    Customer :
                                    <span t-field="doc.partner_id.name"></span>
                                </td>
                                <td align="right">
                                    Date :
                                    <span t-field="doc.invoice_date"></span>
                                </td>
                            </tr>

                            <tr>
                                <td style="padding-top: 5px;" colspan="5"/>
                            </tr>
                        </table>
                        <table width="100%" style="font-weight: bold; border-color:white ; font-size:10px;">
                            <tr>
                                <td align="center">
                                    <span t-field="doc.name"></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <table width="100%"
                           style="font-weight: bold; page-break-inside: avoid; font-size:10px; border-color:white ;border-top: 1px solid black;">
                        <tr>
                            <td width="28%"
                                style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Product
                            </td>
                            <td align="center"
                                style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Qty
                            </td>
                            <td align="center"
                                style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Price
                            </td>
                            <td align="center"
                                style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Taxes
                            </td>
                            <td align="right"
                                style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Total
                            </td>
                        </tr>
                        <tr>
                            <td style="padding-top: 5px;" colspan="5"/>
                        </tr>
                        <t t-foreach="doc.invoice_line_ids" t-as="d">
                            <t t-if="d.product_id">
                                <tr>
                                    <td style="font-size: 9px; vertical-align: middle;">
                                        <span
                                                t-field="d.product_id.name" style="font-weight: bold;"/>
                                        <br/>

                                    </td>
                                    <td align="center"
                                        style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                        <span t-field="d.quantity"/>
                                        <span t-field="d.product_uom_id"/>
                                    </td>
                                    <td align="center"
                                        style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                        <span t-field="d.price_unit"/>
                                    </td>
                                    <td align="center"
                                        style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                        <span t-esc="', '.join(map(lambda x: (x.name), d.tax_ids))"/>
                                    </td>
                                    <td align="right"
                                        style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                        <!--                                        <span t-field="doc.currency_id.symbol"/>-->
                                        <!--                                            <span t-esc="'%.2f'%d.price_subtotal"/>-->
                                        <span t-esc="'%.2f'%d.price_total"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-top: 7px;" colspan="5"/>
                                </tr>
                            </t>
                        </t>
                    </table>

                    <table width="100%"
                           style="font-weight: bold; page-break-inside: avoid; font-size:10px; border-color:white ;border-top: 1px solid black;">
                        <tr>
                            <td
                                    style="vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                SGST
                            </td>
                            <td align="center"
                                style=" vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                CGST
                            </td>
                            <td align="center"
                                style="vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                IGST
                            </td>
                            <td align="right"
                                style="vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                Cess
                            </td>
                        </tr>
                        <tr>
                            <td style="vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                <t t-set="linesss"
                                   t-value="doc.invoice_line_ids.sorted(key=lambda l:(-l.sequence, l.date, l.move_name, -l.id), reverse=True)"/>
                                <span t-esc="'%.2f'% sum(linesss.mapped('sgst_perc')) "/>
                            </td>
                            <td align="center"
                                style=" vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                <span t-esc="'%.2f'% sum(linesss.mapped('cgst_perc')) "/>
                            </td>
                            <td align="center"
                                style=" vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                <span t-esc="'%.2f'% sum(linesss.mapped('igst_perc')) "/>
                            </td>
                            <td align="right"
                                style=" vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                            <span t-esc="'%.2f'% sum(linesss.mapped('cess')) "/>
                            </td>
                        </tr>


                        <table width="100%" style="font-weight: bold; page-break-inside: avoid;  border-color:white ;">
                            <tr>
                                <td colspan="2" style="border-top: 1px solid black;"/>
                            </tr>
                            <tr>
                                <td width="70%" align="right" style="vertical-align: middle; font-size:9px;">Total
                                    Amount
                                    Before Tax
                                </td>
                                <td align="right" style="vertical-align: middle; font-size:8px;">
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="'%.2f'% doc.amount_untaxed"/>
                                </td>


                            </tr>
                            <tr>
                                <td width="70%" align="right" style="vertical-align: middle; font-size:9px;">Total
                                    Amount
                                </td>
                                <td align="right" style="vertical-align: middle; font-size:8px;">
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="'%.2f'%doc.amount_total"/>
                                </td>


                            </tr>

                            <!--                        <td style=" font-weight: 800;border-right: 1px solid black;padding: 15px 5px 5px 15px;"-->
                            <!--                            class="text-right">-->
                            <!--                            <t t-set="line"-->
                            <!--                               t-value="doc.invoice_line_ids.filtered(lambda line: line.tax_id == line_tax)"/>-->
                            <!--                            <t t-set="cgst"-->
                            <!--                               t-value="sum(line.mapped('cgst_perc'))"/>-->
                            <!--                            <span class="text-nowrap"-->
                            <!--                                  t-esc="'%.2f'% cgst"/>-->
                            <!--                        </td>-->

                            <tr>
                                <td align="right" style="vertical-align: middle; font-size:8px;">Advance</td>
                                <td align="right" style="vertical-align: middle; font-size:8px;">
                                    <t t-set="pay" t-value="0"/>
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="'%.2f'%pay"/>
                                </td>
                            </tr>
                            <tr>
                                <td align="right" style="vertical-align: middle; font-size:10px;">Balance Amount</td>
                                <td align="right" style="vertical-align: middle; font-size:10px;">
                                    <t t-set="pay" t-value="0"/>

                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="round(doc.amount_total-pay)"/>
                                </td>
                            </tr>
                        </table>


                        <table width="100%" style="font-weight: bold;  border-color:white ;">
                            <tr>
                                <td align="center"
                                    style="border-top: 1px solid black; vertical-align: middle; font-size: 15px; padding-top: 15px;">
                                    THANK YOU
                                    FOR SHOPPING
                                </td>
                            </tr>
                        </table>
                    </table>
                </t>
            </t>
        </t>
    </template>
</odoo>
