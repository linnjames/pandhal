<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="sale_order_quotation">
        <t t-call="web.basic_layout">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <div width="100%" style="text-align: center;">
                        <img src='/web/binary/company_logo'
                             style="max-height: 25px;"
                             alt="Logo"/>
                    </div>
                    <div width="100%">
                        <table width="100%" style="font-weight: bold; border-color:white ;">
                            <!--                            <tr>-->
                            <!--                                <td align="center"-->
                            <!--                                    style="vertical-align: middle; font-size: 10px;">-->
                            <!--                                    <span t-field="doc.company_id.brand_name"/>-->
                            <!--                                </td>-->
                            <!--                            </tr>-->
                            <tr>
                                <td align="center"
                                    style="vertical-align: middle; font-size: 9px;">
                                    <span t-field="doc.company_id.partner_id"
                                          t-options='{"widget": "contact", "fields": ["address", "phone", "email"], "no_marker": True}'/>
                                    <!--                                    <t t-if="doc.company_id.einv_gstin">-->
                                    <!--                                        GSTIN:-->
                                    <!--                                        <span t-field="doc.company_id.einv_gstin"/>-->
                                    <br/>
                                    <!--                                    </t>-->
                                    <!--                                    <t t-if="doc.company_id.fssai_no">-->
                                    <!--                                        fssai No:-->
                                    <!--                                        <span t-field="doc.company_id.fssai_no"/>-->
                                    <!--                                    </t>-->
                                </td>
                            </tr>
                            <tr>
                                <td align="center"
                                    style="padding-top: 8px; vertical-align: middle; font-size: 10px;">
                                    Customer Order
                                </td>
                            </tr>
                        </table>
                        <br/>
                        <table width="100%" style="font-weight: bold;  border-color:white ;">
                            <tr>
                                <td style="border-top: 1px solid black; font-size:9px; vertical-align: middle;">
                                    Customer:&#160;<span
                                        t-field="doc.partner_id.name"/>
                                </td>
                                <td align="left"
                                    style="border-top: 1px solid black; font-size:9px; vertical-align: middle;">Date:
                                    <span t-field="doc.validity_date"/>

                                    <!--                                    <t t-if="doc.date_order">-->
                                    <!--                                        <span t-esc="doc.date_order.strftime('%d-%m-%Y')"/>-->
                                    <!--                                    </t>-->
                                </td>
                            </tr>
                            <tr>
                                <td colspan="1"
                                    style="padding-top: 8px; font-size:8px; vertical-align: middle;">
                                    Phone:&#160;
                                    <span
                                            t-field="doc.partner_id.phone"/>
                                </td>
<!--                                <td colspan="1"-->
<!--                                    style="padding-top: 8px; font-size:8px; vertical-align: middle;" align="left">-->
<!--                                    Trip:&#160;<span-->
<!--                                        t-field="doc.trip_id.name"/>-->
<!--                                </td>-->
                            </tr>
                            <tr>
                                <td style="padding-top: 10px; border-bottom: 1px solid black; font-size:9px; vertical-align: middle;">
                                    SO:&#160;<span
                                        t-field="doc.name"/>
                                </td>
                                <td width="53%" align="left"
                                    style="padding-top: 10px; border-bottom: 1px solid black; font-size:9px; vertical-align: middle;">
                                    Delivery Date:

                                    <span t-field="doc.date_order"/>
                                    <!--                                    <t t-if="doc.date_order">-->
                                    <!--                                        <span t-field="doc.date_order"/>-->
                                    <!--                                    </t>-->
                                    <!--                                    <span t-field="doc.expected_delivery_date"/>-->
                                    <!--                                    <t t-if="doc.date_expected_delivery">-->
                                    <!--                                        <span t-field="doc.date_expected_delivery"/>-->
                                    <!--                                    </t>-->
                                    <!--                                    <t t-if="doc.expected_time">-->
                                    <!--                                        <span t-esc="'%.2f'%doc.expected_time"/>-->
                                    <!--                                    </t>-->
                                </td>
                            </tr>
                        </table>
                        <table width="100%" style=" border-color:white ;">
                            <tr>
                                <td width="38%"
                                    style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                    Product
                                </td>
                                <td align="center"
                                    style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                    Qty
                                </td>
                                <td align="center"
                                    style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                    Price
                                </td>
                                <td align="center"
                                    style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                    Taxes
                                </td>
                                <td align="right"
                                    style="border-bottom: 1px solid black; vertical-align: middle; font-size:9px; padding-top: 5px; padding-bottom: 5px; font-weight: bold;">
                                    Total
                                </td>
                            </tr>
                            <tr>
                                <td style="padding-top: 5px;" colspan="5"/>
                            </tr>
                            <t t-foreach="doc.order_line" t-as="d">
                                <t t-if="d.product_id">
                                    <tr>
                                        <td style="font-size: 9px; vertical-align: middle;">
                                            <span
                                                    t-field="d.product_id.name" style="font-weight: bold;"/>
                                            <br/>
                                            <span style="font-size: 7px;">HSN:</span>
                                            <span
                                                    t-field="d.product_id.l10n_in_hsn_code" style="font-size: 7px;"/>
                                        </td>
                                        <td align="center"
                                            style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                            <span t-field="d.product_uom_qty"/>
                                        </td>
                                        <td align="center"
                                            style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                            <span t-field="d.price_unit"/>
                                        </td>
                                        <td align="center"
                                            style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                            <span t-esc="', '.join(map(lambda x: (x.name), d.tax_id))"/>
                                        </td>
                                        <td align="right"
                                            style="font-size: 9px; vertical-align: middle; font-weight: bold;">
                                            <span t-field="doc.currency_id.symbol"/>
                                            <!--                                            <span t-esc="'%.2f'%d.price_subtotal"/>-->
                                            <span t-esc="'%.2f'%d.price_total"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding-top: 7px;" colspan="5"/>
                                    </tr>
                                </t>
                            </t>
                        </table>

                        <table width="100%" style="font-weight: bold; page-break-inside: avoid;  border-color:white ;">
                            <tr>
                                <td colspan="2" style="border-top: 1px solid black;"/>
                            </tr>
                            <!--                            <t t-foreach="doc.amount_by_group" t-as="amount_by_group">-->
                            <!--                                <tr>-->
                            <!--                                    <t t-if="len(doc.order_line.filtered(lambda line: line.tax_id))-->
                            <!--                                                        in [0, 1] and doc.amount_untaxed == amount_by_group[2]">-->
                            <!--                                        <td align="right" style="vertical-align: middle; font-size:8px;">-->
                            <!--                                            <span t-esc="amount_by_group[0]"/>-->
                            <!--                                        </td>-->
                            <!--                                        <td align="right" style="vertical-align: middle; font-size:8px;">-->
                            <!--                                            <span t-esc="amount_by_group[3]"/>-->
                            <!--                                        </td>-->
                            <!--                                    </t>-->
                            <!--                                    <t t-else="">-->
                            <!--                                        <td align="right" style="vertical-align: middle; font-size:8px;">-->
                            <!--                                            &lt;!&ndash;                                            Tax Amount&ndash;&gt;-->
                            <!--                                            <span t-esc="amount_by_group[0]"/>-->
                            <!--                                        </td>-->
                            <!--                                        <td align="right" style="vertical-align: middle; font-size:8px;">-->
                            <!--                                            <span t-esc="amount_by_group[3]"/>-->
                            <!--                                        </td>-->
                            <!--                                    </t>-->
                            <!--                                </tr>-->
                            <!--                            </t>-->
                            <!--                            <t t-if="doc.discount_amount">-->
                            <!--                                <tr>-->
                            <!--                                    <td align="right" style="vertical-align: middle; font-size:8px;">Discount Amount-->
                            <!--                                    </td>-->
                            <!--                                    <td align="right" style="vertical-align: middle; font-size:8px;">-->
                            <!--                                        &lt;!&ndash;                                    <span t-field="doc.currency_id.symbol"/>&ndash;&gt;-->
                            <!--                                        <span t-esc="'%.2f'%doc.discount_amt"/>-->
                            <!--                                    </td>-->
                            <!--                                </tr>-->
                            <!--                            </t>-->
                            <tr>
                                <td width="70%" align="right" style="vertical-align: middle; font-size:9px;">Total
                                    Amount
                                </td>
                                <td align="right" style="vertical-align: middle; font-size:8px;">
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="'%.2f'%doc.amount_total"/>
                                </td>
                            </tr>
                            <tr>
                                <td align="right" style="vertical-align: middle; font-size:8px;">Advance</td>
                                <td align="right" style="vertical-align: middle; font-size:8px;">
                                    <t t-set="pay" t-value="0"/>
                                    <!--                                    <t t-foreach="doc.adv_payment_ids" t-as="p">-->
                                    <!--                                        <t t-set="pay" t-value="pay + p.amount"/>-->
                                    <!--                                    </t>-->
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="'%.2f'%pay"/>
                                </td>
                            </tr>
                            <tr>
                                <td align="right" style="vertical-align: middle; font-size:10px;">Balance Amount</td>
                                <td align="right" style="vertical-align: middle; font-size:10px;">

                                    <!--                                    <t t-set="pay" t-value="0"/>-->
                                    <!--                                    <t t-foreach="doc.adv_payment_ids" t-as="p">-->
                                    <!--                                        <t t-set="pay" t-value="pay + p.amount"/>-->
                                    <!--                                    </t>-->
                                    <!--                                    <t t-set="balance_pay" t-value="doc.amount_total - pay"/>-->

                                    <!--                                    <t t-set="b_value" t-value="0"/>-->
                                    <!--                                    <t t-if="balance_pay != 0">-->
                                    <!--                                        <t t-set="b_value" t-value="round(balance_pay, 0) - round(balance_pay)"/>-->
                                    <!--                                    </t>-->
                                    <!--                                    <t t-if="b_value == 0.5">-->
                                    <!--                                        <span t-field="doc.currency_id.symbol"/>-->
                                    <!--                                        <span t-esc="round(balance_pay + 0.1)"/>-->
                                    <!--                                    </t>-->
                                    <!--                                    <t t-else="">-->
                                    <!--                                        <span t-field="doc.currency_id.symbol"/>-->
                                    <!--                                        <span t-esc="round(balance_pay)"/>-->
                                    <!--                                    </t>-->
                                    <t t-set="pay" t-value="0"/>
                                    <!--                                    <t t-foreach="doc.adv_payment_ids" t-as="p">-->
                                    <!--                                        <t t-set="pay" t-value="pay + p.amount"/>-->
                                    <!--                                    </t>-->
                                    <span t-field="doc.currency_id.symbol"/>
                                    <span t-esc="round(doc.amount_total-pay)"/>
                                </td>
                            </tr>
                        </table>
                        <t t-set="line_len_pro" t-value="0"/>
                        <t t-foreach="doc.order_line" t-as="pro">
                            <!--                            <t t-if="pro.message">-->
                            <!--                                <t t-set="line_len_pro" t-value="line_len_pro + 1"/>-->
                            <!--                            </t>-->
                        </t>
                        <t t-if="line_len_pro != 0">
                            <table width="100%" style="font-weight: bold;  border-color:white ;">
                                <tr>
                                    <td width="38%"
                                        style="vertical-align: middle; font-size:9px; border-top: 1px solid black; border-bottom: 1px solid black; padding-top: 5px; padding-bottom: 5px;">
                                        Product
                                    </td>
                                    <td style="vertical-align: middle; font-size:9px; border-top: 1px solid black; border-bottom: 1px solid black; padding-top: 5px; padding-bottom: 5px;">
                                        Message
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-top: 5px;" colspan="2"/>
                                </tr>
                                <t t-foreach="doc.order_line" t-as="mess">
                                    <t t-if="mess.message">
                                        <tr>
                                            <td style="font-size: 9px; vertical-align: middle;">
                                                <span t-field="mess.product_id.name" style="font-weight: bold;"/>
                                            </td>
                                            <td style="font-size: 9px; vertical-align: middle;">
                                                <span t-field="mess.message" style="font-weight: bold;"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 7px;" colspan="2"/>
                                        </tr>
                                    </t>
                                </t>
                            </table>
                        </t>
                        <table width="100%" style="font-weight: bold;  border-color:white ;">
                            <tr>
                                <td align="center"
                                    style="border-top: 1px solid black; vertical-align: middle; font-size: 15px; padding-top: 15px;">
                                    THANK YOU
                                    FOR SHOPPING
                                </td>
                            </tr>
                        </table>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>


