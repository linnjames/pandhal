<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="inherit_account_move_taxes_form_view" model="ir.ui.view">
            <field name="name">account.move.taxes.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='tax_totals']" position="before">
                    <field name="tcs_percentage"
                           attrs="{'invisible': [('apply_tcs', '=', False)]}" force_save="1" invisible="1"/>
                    <field name="tcs_amount" force_save="1"
                           attrs="{'invisible': [('apply_tcs', '=', False)]}" widget="monetary"
                           options="{'currency_field': 'currency_id'}"/>
                    <field name="tds_percentage" invisible="1"/>
<!--                           attrs="{'invisible': ['|',('apply_tds', '=', False), ('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"-->
<!--                           force_save="1" readonly="1"/>-->
                    <field name="tds_amount" invisible="1"/>
<!--                           attrs="{'invisible': ['|', ('apply_tds', '=', False), ('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"-->
<!--                           widget="monetary"-->
<!--                           options="{'currency_field': 'currency_id'}"/>-->
                </xpath>

<!--                <field name="amount_untaxed" position="after">-->
<!--                    <field name="tcs_percentage"-->
<!--                           attrs="{'invisible': [('apply_tcs', '=', False)]}" force_save="1" readonly="1"/>-->
<!--                    <field name="tcs_amount" force_save="1"-->
<!--                           attrs="{'invisible': [('apply_tcs', '=', False)]}" widget="monetary"-->
<!--                           options="{'currency_field': 'currency_id'}"/>-->
<!--                    <field name="tds_percentage"-->
<!--                           attrs="{'invisible': ['|',('apply_tds', '=', False), ('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"-->
<!--                           force_save="1" readonly="1"/>-->
<!--                    <field name="tds_amount" force_save="1"-->
<!--                           attrs="{'invisible': ['|', ('apply_tds', '=', False), ('move_type', 'not in', ('in_invoice', 'out_invoice'))]}"-->
<!--                           widget="monetary"-->
<!--                           options="{'currency_field': 'currency_id'}"/>-->
<!--                </field>-->

                <field name="payment_reference" position="after">
                    <field name="apply_tcs" attrs="{'invisible': [('move_type', 'not in', ('in_invoice'))]}"
                          />
                    <field name="apply_tds"
                           attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'in_invoice'))]}"/>
                    <field name="tds_section" readonly="1" force_save="1"
                           attrs="{'invisible': [('move_type', 'not in', ('out_invoice', 'in_invoice'))]}"
                           />
                    <field name="tcs_section" readonly="1" force_save="1"
                           attrs="{'invisible': [('move_type', 'not in', ('in_invoice'))]}"
                           />
                </field>

                 <xpath expr="//field[@name='line_ids']/tree/field[@name='partner_id']" position="attributes">
                     <attribute name="options">{'no_create': True, 'no_edit': True, 'no_open': True}</attribute>
                 </xpath>
<!--                <xpath expr="//field[@name='line_ids']/tree/field[@name='discount']" position="before">-->
<!--                    <field name="is_global_line" invisible="1"/>-->
<!--                    <field name="tcs" invisible="1" force_save="1"/>-->
<!--                    <field name="tds" invisible="1"/>-->
<!--                </xpath>-->
                <xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="before">
                    <field name="tcs" force_save="1" invisible="1"/>
                    <field name="tds" force_save="1" invisible="1"/>
                </xpath>
                 <xpath expr="//notebook" position="inside">
                    <page string="TDS" name="tds_page" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tds_voucher', '=', False)]}">
                        <group>
                            <group>
                                <field name="account_move_id" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tds_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                                <field name="tds_section_id" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tds_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                            </group>
                            <group>
                                <field name="untaxed_bill_amount" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tds_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                                <field name="taxed_bill_amount" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tds_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                            </group>
                        </group>
                    </page>
                     <page string="TCS" name="tcs_page" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tcs_voucher', '=', False)]}">
                        <group>
                            <group>
                                <field name="account_move_tcs_id" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tcs_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                                <field name="tcs_section_id" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tcs_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                            </group>
                            <group>
                                <field name="untaxed_bill_tcs_amount" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tcs_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                                <field name="taxed_bill_tcs_amount" groups="account_taxes.group_order_taxes" attrs="{'invisible': [('tcs_voucher', '=', False), ('move_type', '!=', 'entry')]}"/>
                            </group>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//div[@name='journal_div']" position="after">
                    <field name="tds_voucher" attrs="{'invisible': [('move_type', '!=', 'entry')]}" groups="account_taxes.group_order_taxes"/>
                    <field name="tcs_voucher" attrs="{'invisible': [('move_type', '!=', 'entry')]}" groups="account_taxes.group_order_taxes"/>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="force_save">1</attribute>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="account_move_search_inherit_view">
            <field name="name">account.move.search.inherit.view</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='cancel']" position="after">
                    <separator/>
                    <filter string="Yesterday" name="yesterday_date_filter"
                            domain="[('invoice_date_due','>=', ((context_today() - datetime.timedelta(days=1)).strftime('%Y-%m-%d'))+' '+'00:00:00'),('invoice_date_due','&lt;=', ((context_today() - datetime.timedelta(days=1)).strftime('%Y-%m-%d'))+' '+'23:59:59')]"/>
                    <filter string="Today" name="today_date_filter"
                            domain="[('invoice_date_due','>=', ((context_today()).strftime('%Y-%m-%d'))+' '+'00:00:00'),('invoice_date_due','&lt;=', ((context_today()).strftime('%Y-%m-%d'))+' '+'23:59:59')]"/>
                    <filter string="Tomorrow" name="invoice_tomorrow_filter"
                            domain="[('invoice_date_due','>=', ((context_today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d'))+' '+'00:00:00'),('invoice_date_due','&lt;=', ((context_today() + datetime.timedelta(days=1)).strftime('%Y-%m-%d'))+' '+'23:59:59')]"/>
                    <separator/>
                </xpath>
            </field>
        </record>

    </data>
</odoo>
